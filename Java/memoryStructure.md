## 자바 메모리 구조

* Java application이 실행될 때 사용되는 메모리 영역이다.
* Java는 가비지 컬렉션을 통해 메모리를 관리하고, 메모리를 여러 영역으로 나누어 관리함으로써 효율적인 자원 활용을 지향한다.
* Java의 메모리 구조는 크게 ``메서드 영역``, ``스택 영역``, ``힙 영역`` 3개로 나눌 수 있다.

<br>

## 자바 메모리 영역
* ``메서드 영역``: 클래스 정보를 포함한, 프로그램을 실행하는데 필요한 **공통 데이터**를 관리한다. 이 영역은 프로그램의 모든 영역에서 공유한다.

  * 클래스 정보: 클래스의 실행 코드(바이트 코드), 필드, 메서드와 생성자 코드등 모든 실행 코드가 존재한다.
  * static 영역: **static 변수**들을 보관한다.
  * 런타임 상수 풀: 프로그램을 실행하는데 필요한 공통 리터럴 상수를 보관한다. 예를 들어서, 프로그램에
"hello" 라는 리터럴 문자가 있으면 이런 문자를 공통으로 묶어서 관리한다.


* ``스택 영역``: 실제 프로그램이 실행되는 영역으로, 메서드를 실행할 때마다 스택 프레임이 하나씩 쌓인다.  각 스택 프레임은 **지역 변수, 중간 연산 결과,
   메서드 호출 정보** 등을 포함한다. 메서드가 종료되면 해당 스택 프레임이 제거된다.
* ``힙 영역``: **객체(인스턴스)와 배열**이 생성되는 영역이다. 가비지 컬렉션(GC)이 이루어지는 주요 영역이며, 더 이상 참조되지 않는 객체는 GC에 의해 제거된다.

<br>

## static 변수가 필요한 이유

```
예를 들어, 생성된 객체의 수를 세기 위해 객체가 생성될 때마다 생성자를 통해 인스턴스의 멤버 변수인 count 값을 증가시킨다고 생각해보자.
count 변수는 객체에 속해있기 때문에, 객체가 생성될 때마다 새로운 count 멤버 변수가 생성되어 값이 0으로 초기화된다.
인스턴스에 사용되는 멤버 변수 count 값은 인스턴스끼리 서로 공유되지 않는다. 따라서 원하는 답을 구할 수 없다.
이 문제를 해결하려면 변수를 서로 공유해야 하는데, 이 때 static 키워드를 사용해 공용으로 사용할 변수로 변환하면 된다.
```

<br>

## static 변수

* 특정 클래스에서 **공용으로 함께 사용할 수 있는 변수**를 만들 수 있다면 편리한데, 이 때 ``static`` 키워드를 사용하면 공용으로 함께 사용하는 변수를 만들 수 있다.
* 멤버 변수에 ``static``을 붙이게 되면 ``static`` 변수, 정적 변수 또는 클래스 변수라 한다.
* ``static`` 변수에 접근하려면, Data.count 와 같이 클래스명에 . (dot)을 사용한다.
* ``static``이 붙은 멤버 변수는 ``메서드 영역``에서 관리한다.
* ``static`` 변수는 자바 프로그램을 시작할 때 딱 1개가 만들어진다. 인스턴스와는 다르게 보통 여러곳에서 공유하는 목적으로 사용된다.
* ``static`` 변수는 해당 클래스가 JVM에 로딩 되는 순간 생성되고, JVM이 종료될 때 제거된다.

<br>

## static 메서드가 필요한 이유

```
예를 들어, 문자열이 들어오면 앞 뒤에 * 을 붙여서 반환하는 DecoUtil 클래스의 deco() 메서드가 존재한다고 생각해보자.
deco() 메서드를 호출하기 위해서는 DecoUtil1 의 인스턴스를 먼저 생성해야 한다.
그런데 deco() 라는 기능은 멤버 변수도 없고, 단순히 기능만 제공할 뿐이다.
인스턴스가 필요한 이유는 멤버 변수(인스턴스 변수)등을 사용하는 목적이 큰데, 이 메서드는 사용하는 인스턴스 변수도 없고 단순히 기능만 제공한다.
따라서, 이러한 메서드에는 static 키워드를 붙여 인스턴스를 생성하지 않고 메서드만 이용할 수 있도록 하면 된다.
```

<br>

## static 메서드

* 인스턴스 생성 없이 메서드만 필요할 경우, ``static`` 키워드를 사용하면 인스턴스를 만들지 않고 클래스 명을 통해서 바로 호출할 수 있다.
* 클래스명 + . (dot) + 메서드 명으로 호출이 가능하다.
* ``static`` 메서드는 ``static``만 사용할 수 있다.
  * 클래스 내부의 기능을 사용할 때, 정적 메서드는 ``static``이 붙은 정적 메서드나 정적 변수만 사용할 수 있다.
  * 클래스 내부의 기능을 사용할 때, 정적 메서드는 인스턴스 변수나, 인스턴스 메서드를 사용할 수 없다.

* 반대로 모든 곳에서 ``static``을 호출할 수 있다.
  * 정적 메서드는 공용 기능이다. 따라서, 접근 제어자만 허락한다면 클래스를 통해 모든 곳에서 ``static``을 호출할 수 있다.

* 정적 메서드는 **객체 생성이 필요 없이 메서드의 호출만으로 필요한 기능**을 수행할 때 주로 사용한다.

```
예를 들어, 간단한 메서드 하나로 끝나는 유틸리티성 메서드에 자주 사용한다.
수학의 여러가지 기능을 담은 클래스를 만들 수 있는데, 이 경우 인스턴스 변수 없이 입력한 값을 계산하고 반환하는 것이 대부분이다.
이럴 때 정적 메서드를 사용해서 유틸리티성 메서드를 만들면 좋다.
```